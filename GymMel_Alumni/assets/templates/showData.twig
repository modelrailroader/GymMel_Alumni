<div class="container mt-5">
    {% if success_message != '' %}
        {{ success_message|raw }}
    {% endif %}
    <h1>Netzwerkdatenbank</h1>
    <div style="margin-top: 40px"></div>

    <table id="alumniTable" class="table table-striped table-bordered">
        <thead>
        <tr>
            <th data-priority="1">Name</th>
            <th data-priority="2">E-Mail-Adresse</th>
            <th>Beruf</th>
            <th>Ausbildung</th>
            <th>Unternehmen</th>
            <th>Registrierung</th>
            <th data-priority="4">Weitergabe der Daten</th>
            <th data-priority="3" data-orderable="false">Bearbeiten</th>
        </tr>
        </thead>
        <tbody>
        {% for item in data %}
            <tr>
                <td>{{ item.name }}</td>
                <td>{{ item.email }}</td>
                <td>{{ item.job }}</td>
                <td>{{ item.studies }}</td>
                <td>{{ item.company }}</td>
                <td data-order="{{ item.date_registered }}">{{ item.date_registered|date('d.m.Y - H:i') }}</td>
                <td>
                    {% if item.transfer_privacy == 1 %}
                        Ja
                    {% else %}
                        Nein
                    {% endif %}</td>
                <td><a href="editData.php?id={{ item.id }}"><i class="bi bi-pencil-square"></i></a>&nbsp;
                    <a href="showData.php?id={{ item.id }}&action=delete" id="item-delete" data-name="{{ item.name }}">
                        <i class="bi bi-trash3"></i></a></td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <button type="button" class="btn btn-primary" id="findDuplicatesButton">
        Duplikate finden
    </button>

    <div class="modal fade" id="modalDuplicates" tabindex="-1" aria-labelledby="duplikateModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="duplikateModalLabel"><i class="bi bi-copy"></i> Gefundene Duplikate</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="text-end mb-3">
                        <button class="btn btn-outline-secondary" id="previous"><i class="bi bi-arrow-left"></i></button>
                        <button class="btn btn-outline-secondary" id="next"><i class="bi bi-arrow-right"></i></button>
                        <p id="pageCounter" data-current-page="1" class="mt-1"> Duplikat 1 von 6</p>
                    </div>

                    <div class="page" id="page1" data-page-number="1" style="display: none">
                        <h6>Duplikate auf Seite 1:</h6>
                        <div class="accordion" id="accordionPage1">
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingPage1">
                                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapsePage1" aria-expanded="true" aria-controls="collapsePage1">
                                        Duplikat 1
                                    </button>
                                </h2>
                                <div id="collapsePage1" class="accordion-collapse collapse show" aria-labelledby="headingPage1" data-bs-parent="#accordionPage1">
                                    <div class="accordion-body">
                                        <ul>
                                            <li>Datum 1</li>
                                            <li>Datum 2</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="accordion" id="accordionPage1">
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingPage1">
                                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapsePage1" aria-expanded="true" aria-controls="collapsePage1">
                                        Duplikat 2
                                    </button>
                                </h2>
                                <div id="collapsePage1" class="accordion-collapse collapse show" aria-labelledby="headingPage1" data-bs-parent="#accordionPage1">
                                    <div class="accordion-body">
                                        <ul>
                                            <li>Datum 1</li>
                                            <li>Datum 2</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="page" id="page2" data-page-number="2" style="display: none">
                        <h6>Duplikate auf Seite 2:</h6>
                        <div class="accordion" id="accordionPage1">
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingPage1">
                                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapsePage1" aria-expanded="true" aria-controls="collapsePage1">
                                        Duplikat 1
                                    </button>
                                </h2>
                                <div id="collapsePage1" class="accordion-collapse collapse show" aria-labelledby="headingPage1" data-bs-parent="#accordionPage1">
                                    <div class="accordion-body">
                                        <ul>
                                            <li>Datum 1</li>
                                            <li>Datum 2</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="accordion" id="accordionPage1">
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingPage1">
                                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapsePage1" aria-expanded="true" aria-controls="collapsePage1">
                                        Duplikat 2
                                    </button>
                                </h2>
                                <div id="collapsePage1" class="accordion-collapse collapse show" aria-labelledby="headingPage1" data-bs-parent="#accordionPage1">
                                    <div class="accordion-body">
                                        <ul>
                                            <li>Datum 1</li>
                                            <li>Datum 2</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="text-center mt-3">
                        <button type="button" class="btn btn-outline-primary"><i class="bi bi-intersect"></i> Duplikate zusammenführen</button>
                        <button type="button" class="btn btn-outline-danger"><i class="bi bi-ban"></i> Ignorieren</button>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success" data-bs-dismiss="modal"><i class="bi bi-check-all"></i> Fertig</button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    function showPage(pageId) {
        // Verstecke alle Seiten
        document.querySelectorAll('.page').forEach(function (page) {
            page.style.display = 'none';
        });

        // Zeige die ausgewählte Seite
        document.getElementById(pageId).style.display = 'block';
    }
</script>

<div style="margin-top: 50px;"></div>
